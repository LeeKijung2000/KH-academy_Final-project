<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>마이페이지</title>
<!-- 공통 레이아웃 CSS -->
<link rel="stylesheet" th:href="@{/css/user/userCommon.css}" />

<!-- 페이지 전용 CSS -->
<link rel="stylesheet" th:href="@{/css/user/myPage.css}" />
<!-- 아이콘 CDN (v6) -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
</head>
<body>


	<!-- 로그인확인용 -->
	<div class="card"
		style="margin: 10px 4px; padding: 8px; font-size: 13px; color: #666">
		userNo: <b th:text="${session.userNo}">null</b>, userId: <b
			th:text="${session.userId}">null</b>, name: <b
			th:text="${session.loginUser != null ? session.loginUser.userName : 'null'}">null</b>
	</div>
	<!-- 로그인확인용	 -->




	<!-- 전역 헤더 (공통) -->
	<div th:replace="~{common/myHeader}"></div>

	<!-- 전역 사이드바 (공통) -->
	<div th:replace="~{common/mySidebar}"></div>



	<main class="page">
		<!-- 상단 타이틀바 -->
		<div class="page-topbar">
			<h1 class="page-title">마이페이지</h1>
			<div class="page-actions"></div>

		</div>

		<!-- 프로필 카드 -->
		<section class="card profile-card">
			<div class="avatar">
				<!-- 실제 파일: C:\uploadFilesFinal\notice\default-avatar.png -->
				<img th:src="${profileImageUrl}"
					src="/uploadFilesFinal/default-avatar.png" alt="프로필" />
			</div>

			<div class="profile-meta">
				<div class="nickname" th:text="${profileName}">사용자명</div>
				<div class="chips">
					<!-- 요구사항: 연령대 + 등급 -->
					<span class="chip" th:text="${profileAge}">30대</span> <span
						class="chip" th:text="${profileGrade}">일반</span>
				</div>
			</div>

			<!-- 화살표 누르면 내정보로 -->
			<a class="chevron" th:href="@{/my/myInfo}" aria-label="프로필 설정 이동">내정보
				변경›</a>
		</section>



		<!-- 매칭률 배너 -->
		<section class="card hero-card">
			<div class="hero-illustration" aria-hidden="true"></div>
			<p class="hero-desc">
				지금 사용하고 있는 제품을 선택하면<br /> <b>내 피부와의 매칭률을 알려드려요</b>
			</p>
			<button class="primary">매칭률 확인하기</button>
		</section>

		<!-- 리뷰 인입 카드 -->
		<section class="card review-cta">
			<div class="review-cta-left">
				<h2 class="section-title">내가 사용해 본 제품 리뷰 쓰기</h2>
				<p class="muted">쇼핑 구매 여부와 상관 없이</p>
			</div>

			<div class="review-cta-full">
				<a class="pill-btn" th:href="@{/my/myReview}">리뷰 쓰고 포인트 받기</a>
			</div>
		</section>

		<!-- 구매한 제품 리뷰 쓰기 -->
		<section class="list-row">
			<h3>나의 이벤트</h3>
		</section>

		<!-- 마이 메뉴 -->
		<section class="menu-list card">
			<a class="menu-item" th:href="@{/my/myPoint}">나의 포인트</a> 
			<a class="menu-item" th:href="@{/my/myCoupon}">나의 쿠폰</a> 
			<a class="menu-item" th:href="@{/my/experienceWins}">체험단 당첨내역</a>
			<a class="menu-item" th:href="@{/my/myWriteReview}">내가 쓴 리뷰<span>상위 몇%인지 확인하기</span></a>
			<a class="menu-item" th:href="@{/my/myInquiry}">내가 쓴 문의</a>
			<a class="menu-item" th:href="@{/my/myProductInquiry}">판매자 상품문의</a>
		</section>

		</section>

		<!-- 나의 관심 -->
		<section>
			<h2 class="block-title">나의 관심</h2>
			<div class="sub-block">
				<div class="sub-title">
					<span
						th:text="'최근 찜한 제품 ' + ${wish3 != null ? #lists.size(wish3) : 0}">최근
						찜한 제품 3</span> <a class="ghost" th:href="@{/my/wishlist}">›</a>
				</div>

				<!-- 리스트 있을 때 -->
				<div class="card product-row"
					th:if="${wish3 != null and !#lists.isEmpty(wish3)}"
					style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px">
					<article class="product" th:each="w : ${wish3}">
						<div class="thumb"
							style="width: 100%; aspect-ratio: 1/1; overflow: hidden; border-radius: 12px; background: #f2f3f5; display: flex; align-items: center; justify-content: center">
							<img th:src="${w.productImageUrl}" alt=""
								style="width: 100%; height: 100%; object-fit: cover" />
						</div>
						<div class="pname"
							style="margin-top: 6px; font-weight: 600; font-size: 14px"
							th:text="${w.productName}">상품명</div>
						<div class="pprice" style="font-size: 13px; color: #667085"
							th:text="${#numbers.formatInteger(w.productPrice,0,'COMMA')} + '원'">0원</div>
						<a class="mini-btn"
							th:href="@{'/product/detail/' + ${w.productNo}}"
							style="margin-top: 6px; display: inline-block; padding: 6px 10px; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 12px">상품
							보기</a>
					</article>
				</div>

				<!-- 없을 때 -->
				<div class="card product-row"
					th:if="${wish3 == null or #lists.isEmpty(wish3)}"
					style="padding: 16px; color: #667085">최근 찜한 제품이 없어요.</div>
			</div>
		</section>

	</main>

</body>
</html>
