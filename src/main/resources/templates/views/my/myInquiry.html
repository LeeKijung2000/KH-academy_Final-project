<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>나의 문의</title>

  <!-- 공통 레이아웃 CSS -->
  <link rel="stylesheet" th:href="@{/css/user/userCommon.css}" />
  <!-- 페이지 전용 CSS -->
  <link rel="stylesheet" th:href="@{/css/user/myInquiry.css}" />
  <!-- 아이콘 CDN (v6) -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
</head>
<body>

  <!-- 전역 헤더 (공통) -->
  <div th:replace="~{common/myHeader}"></div>

  <!-- 전역 사이드바 (공통) -->
  <div th:replace="~{common/mySidebar}"></div>

  <main class="page">
    <!-- 상단 타이틀바 -->
    <div class="page-topbar">
      <a class="back-btn" href="javascript:history.back()" aria-label="뒤로가기">
        <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
      </a>
      <h1 class="page-title">나의 문의</h1>
      <div class="page-actions"></div>
    </div>

    <!-- 비어있을 때 -->
    <section class="empty-state" th:if="${#lists.isEmpty(myInquiries)}">
      <h2 class="empty-title">작성한 문의가 없어요</h2>
      <p class="empty-sub">상품 상세에서 ‘문의하기’를 이용해 보세요.</p>
    </section>

    <!-- 목록 -->
    <section class="card" th:if="${!#lists.isEmpty(myInquiries)}">
      <h2 class="section-bar">내 문의</h2>
      <ul class="inq-list">
        <li class="inq-item" th:each="q : ${myInquiries}">
          <!-- 상단: 썸네일 + 상품명/작성일 + 상태칩 -->
          <div class="inq-top">
            <img class="inq-thumb"
                 th:src="${q['productImageUrl']}"
                 alt="상품 이미지"
                 onerror="this.onerror=null; this.src='/uploadFilesFinal/default-product.png';"/>

            <div class="inq-head">
              <a class="inq-product"
                 th:href="@{'/product/detail/' + ${q['productNo']}}"
                 th:text="${q['productName']}">상품명</a>
              <span class="inq-date"
                    th:text="${#dates.format(q['createdDate'], 'yyyy.MM.dd HH:mm')}">2025.09.08 12:00</span>
            </div>

            <!-- 상태칩: ANSWERED / WAITING / REJECTED 등 -->
            <span class="chip"
                  th:classappend="${q['status'] == 'ANSWERED'} ? ' chip--ok' :
                                  (${q['status'] == 'WAITING'} ? ' chip--wait' : ' chip--etc')"
                  th:text="${q['statusName']}">답변대기</span>
          </div>

          <!-- 제목/내용 요약 -->
          <div class="inq-body">
            <div class="inq-title" th:text="${q['title']}">문의 제목</div>
            <div class="inq-content" th:text="${q['content']}">
              문의 내용 미리보기…
            </div>

            <!-- 판매자 답변(있을 때만) -->
            <div class="inq-answer" th:if="${q['answerContent'] != null}">
              <i class="fa-solid fa-reply" aria-hidden="true"></i>
              <div class="ans-text" th:text="${q['answerContent']}">판매자 답변 내용…</div>
              <div class="ans-date"
                   th:text="${#dates.format(q['answeredDate'], 'yyyy.MM.dd HH:mm')}">2025.09.08 13:40</div>
            </div>
          </div>

          <!-- 하단 액션 -->
          <div class="inq-actions">
            <a class="ghost-btn"
               th:href="@{'/my/myInquiry/' + ${q['inquiryNo']}}">상세보기</a>
            <a class="ghost-btn"
               th:href="@{'/product/detail/' + ${q['productNo']} + '#qna'}">상품Q&amp;A로 이동</a>
          </div>
        </li>
      </ul>
    </section>

   

  </main>
</body>
</html>
