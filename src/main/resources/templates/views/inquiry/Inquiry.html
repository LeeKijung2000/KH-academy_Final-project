<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고객센터</title>

    <style>
        body {
            background-color: #fff;
            color: #000;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .cs-header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid #ddd;
        }

        .cs-header h2 {
            font-weight: 700;
            font-size: 2rem;
        }

        .cs-header p {
            color: #666;
        }

        .nav-tabs {
            border-bottom: 2px solid #000;
        }

        .nav-tabs .nav-link {
            color: #000;
            font-weight: 500;
            border: none;
        }

        .nav-tabs .nav-link.active {
            border-bottom: 3px solid #000;
            font-weight: 700;
        }

        .accordion-button {
            background: #fff;
            color: #000;
            font-weight: 500;
            border-top: 1px solid #ddd;
        }

        .accordion-button:not(.collapsed) {
            background: #000;
            color: #fff;
        }

        .accordion-body {
            background: #f9f9f9;
            color: #333;
        }

        .form-section {
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .form-control, textarea, input[type="text"] {
            border-radius: 0;
            border: 1px solid #000;
            width: 100%;
            padding: 10px;
        }

        .btn-submit {
            background: #000;
            color: #fff;
            border-radius: 0;
            padding: 12px;
            font-weight: 600;
            width: 100%;
            transition: all 0.2s;
        }

        .btn-submit:hover {
            background: #fff;
            color: #000;
            border: 1px solid #000;
        }

        /* 1:1문의 카드 스타일 */
        .qna-card {
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            background: #fafafa;
            transition: box-shadow 0.2s;
        }

        .qna-card:hover {
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }

        .qna-card h5 {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .qna-card .qna-content {
            margin-bottom: 15px;
            color: #333;
            white-space: pre-line;
        }

        /* 답변 상태별 CSS */
        .qna-card .qna-answer {
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        /* 답변이 등록된 경우 */
        .qna-card .qna-answer.answer-exists {
            background-color: #28a745; /* 녹색 */
            color: #fff;
        }

        /* 답변이 없는 경우 */
        .qna-card .qna-answer.answer-none {
            background-color: #f0f0f0; /* 연한 회색 */
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>

<div th:replace="~{common/header :: header}"></div>

<!-- 상단 고객센터 타이틀 -->
<div class="cs-header">
    <h2>고객센터</h2>
    <p>무엇을 도와드릴까요?</p>
</div>

<div class="container my-4">
    <!-- 탭 -->
    <ul class="nav nav-tabs justify-content-center" id="csTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="qna-tab" data-bs-toggle="tab" data-bs-target="#qna" type="button" role="tab">
                1:1 문의
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="faq-tab" data-bs-toggle="tab" data-bs-target="#faq" type="button" role="tab">
                FAQ
            </button>
        </li>
    </ul>

    <!-- 탭 컨텐츠 -->
    <div class="tab-content mt-4">

        <!-- 1:1문의 (기본 활성화) -->
        <div class="tab-pane fade show active" id="qna" role="tabpanel">

            <!-- 문의내역 카드 리스트 -->
            <div th:each="inq : ${inquirys}" class="qna-card">
                <h5 th:text="${inq.questionTitle}">문의 제목</h5>
                <div class="qna-content" th:text="${inq.questionContent}">
                    문의 내용
                </div>
                <div class="qna-answer"
                     th:classappend="${inq.answerContent != null} ? 'answer-exists' : 'answer-none'"
                     th:text="${inq.answerContent != null ? '[답변] ' + inq.answerContent : '아직 답변이 등록되지 않았습니다.'}">
                    답변 내용
                </div>
            </div>

            <!-- 페이지네이션 -->
            <nav aria-label="Standard pagination example" class="d-flex justify-content-end">
                <ul class="pagination">
                    <li class="page-item" th:classappend="${pi.currentPage == 1} ? 'disabled'">
                        <a class="page-link"
                           th:if="${pi.currentPage > 1}"
                           th:href="@{${loc}(page=${pi.currentPage-1})}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                        <span class="page-link" th:unless="${pi.currentPage > 1}">&laquo;</span>
                    </li>

                    <li class="page-item" th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}"
                        th:classappend="${p == pi.currentPage} ? 'active'">
                        <a class="page-link" th:href="@{${loc}(page=${p})}">[[${p}]]</a>
                    </li>

                    <li class="page-item" th:classappend="${pi.currentPage == pi.maxPage} ? 'disabled'">
                        <a class="page-link"
                           th:if="${pi.currentPage < pi.maxPage}"
                           th:href="@{${loc}(page=${pi.currentPage+1})}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                        <span class="page-link" th:unless="${pi.currentPage < pi.maxPage}">&raquo;</span>
                    </li>
                </ul>
            </nav>

            <hr />

            <!-- 문의 등록 폼 -->
            <div class="form-section mt-4">
                <h3 class="mb-3 text-center">1:1 문의 등록</h3>
                <form th:action="@{/inquiry/insertinquiry}" method="post">
                    <div class="mb-3">
                        <label class="form-label">문의 제목</label>
                        <input name="questionTitle" type="text" placeholder="문의 제목을 입력해주세요.">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">문의 내용</label>
                        <textarea name="questionContent" class="form-control" rows="5" placeholder="문의 내용을 작성해주세요."></textarea>
                    </div>
                    <button type="submit" class="btn btn-submit">등록하기</button>
                </form>
            </div>

        </div>

        <!-- FAQ (비활성화) -->
        <div class="tab-pane fade" id="faq" role="tabpanel">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq1">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapse1">
                            [픽업] 픽업 서비스가 궁금해요
                        </button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            매장에서 직접 수령할 수 있는 서비스입니다. 주문 시 픽업 옵션을 선택하세요.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapse2">
                            [오늘드림] 교환&반품도 매장에서 할 수 있나요?
                        </button>
                    </h2>
                    <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            네, 가까운 매장에서 교환/반품이 가능합니다. 단, 일부 상품은 제한될 수 있습니다.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq3">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapse3">
                            [기프트카드] 기프트카드는 어떻게 등록하나요?
                        </button>
                    </h2>
                    <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            마이페이지 → 기프트카드 등록 메뉴에서 카드 번호를 입력하면 사용 가능합니다.
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div th:replace="~{common/footer :: footer}"></div>

</body>
</html>
