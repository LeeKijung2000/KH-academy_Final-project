<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>주문상세</title>
<link rel="stylesheet" href="../../../css/user/userCommon.css"/>

 <!-- 아이콘(CDN) -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />
<style>
* {
	box-sizing: border-box
}

.form {
	background: #f0f4f9;
	border: 1px solid #cccccc;
	border-radius: 8px;
	padding: 4px 0;
	padding-bottom: 0;
	margin-right: 5%;
	margin-bottom:3%;
	margin-left: 7%;
}

body {

	background: #f7f8f9;
}

.title {
	text-align: center;
	font-weight: bold;
	font-size: 22px;
	margin-right: 5%;
	margin-left: 3%;
}

.order-notice {
	border: 1px solid #ccc;
	border-left: none;
	border-right: none;
	border-top: none;
	color: gray;
	padding-left: 2%;
	padding-right: 2%;
}

.order-notice summary {
	color: black;
	margin-bottom: 2%;
}

.order-box {
	padding-left: 2%;
	padding-right: 2%;
	padding: 10px;
	padding-top: 1.5%;
	padding-left: 2%;
	padding-right: 2%;
	background: #ffffff;
}

.order-count {
	font-weight: bold;
	font-size: 18px;
}

.order-count, .delivery-link {
	display: block;
	margin-bottom: 5px;
}

.order-body {
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.order-image {
	width: 130px;
	height: 130px;
	background-color: #ccc;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 15px;
	margin-top: 1%;
	border-radius: 6px;
}

.order-info {
	flex: 1;
}

.order-info p {
	margin: 3px 0;
}

.order-info .status {
	font-weight: bold;
}

.order-info .price {
	color: #8ad8f0;
	font-weight: bold;
}

.order-info .name {
	color: gray;
}

.review-btn {
	background-color: #eefbfb;
	color: black;
	padding: 11px 25px;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	white-space: nowrap;
	font-weight: bold;
	font-size: 15px;
	border: 1px solid #c2e4e4;
}

.review-btn:hover {
	color: white;
	background: #8ad8f0;
}

.cs-link {
	align-items: center;
	text-decoration: none;
	color: gray;
	display: block;
	margin: 7px auto 5px;
	width: fit-content;
	margin-left:20px;
}

.order-detail summary {
	margin-bottom: 1%;
	margin-top: 1%;
}

.order-detail details {
	border: 1px solid #ccc;
	border-left: none;
	border-right: none;
	padding-left: 2%;
	padding-right: 2%;
	padding-top:0.7%;
	padding-bottom:0.4%;
}

.order-detail p {
	color: gray;
	padding-left: 2%;
	padding-right: 2%;
}
</style>
</head>
<body>
<!-- 전역 헤더 (공통) -->
  <header class="site-header"><a href="index">It:View</a></header>

  <!-- 전역 사이드바 (공통) : 아이콘 구조로 교체 -->
  <nav class="sidenav" aria-label="Primary">
    <div class="sidenav-top">
      <a class="nav-item active" href="/my/myInfo"><i class="fa-solid fa-user"></i><span>마이페이지</span></a>
      <a class="nav-item" href="/experience/experienceApplication"><i class="fa-solid fa-gift"></i><span>체험단 신청</span></a>
      <a class="nav-item" href="/my/myReview"><i class="fa-solid fa-star"></i><span>리뷰</span></a>
      <a class="nav-item" href="/Shopping/cart"><i class="fa-solid fa-cart-shopping"></i><span>장바구니</span></a>
      <a class="nav-item" href="/Shopping/WishList"><i class="fa-solid fa-heart"></i><span>찜</span></a>
      <a class="nav-item"><i class="fa-solid fa-right-from-bracket"></i><span>로그아웃</span></a>
    </div>
    </nav>
<p class="title">주문상세</p>
<form class="form">
<div class="order-notice">
  <p class="date" th:inline="text">결제날짜 / [[${order.orderDate}]]</p>
  <details>
	  <summary>배송/교환/반품 안내 </summary>
	  <p style="padding-left:2%;padding-right:2%;">
	    - 배송은 2~3일 소요됩니다.<br><br>
	    
	    - 교환/반품은 수령 후 7일 이내 가능합니다.<br><br>
	    
	    - 단, 사용 흔적이 있으면 교환/반품이 불가합니다.
	  </p>
</details>
</div>
<div class="order-box" th:each="o:${olist}">
    <span class="order-count">[[${o.orderCount}]]개</span>
    <a th:href="@{/Shopping/delivery(orderNo=${o.orderNo})}" class="delivery-link">배송조회</a>
	  <div class="order-body">
	    <div class="order-image"><img th:each="a:${alist}" th:if="${a.positionNo==o.productNo}"
						th:src="@{/uploadFilesFinal/{file}(file=${a.attmRename})}"
						width="100%" height="100%" style="border-radius: 8px;" /></div>
	    <div class="order-info">
	    	<p class="status" th:if="${o.deliveryStatus !='after'">
				<span th:switch="${o.orderStatus}">
					<span th:case="'completed'">구매완료</span>
					<span th:case="'confirmed'">구매확정</span>
					<span th:case="'cancel'">주문취소</span>
				</span>
			</p>
			<p class="status" th:if="${o.deliveryStatus =='after'">
				<span th:switch="${o.deliveryStatus}">
					<span th:case="'after'">배송완료</span>
				</span>
			</p>
	      <p class="price" th:text="${#numbers.formatInteger(o.productPrice,3,'COMMA')}+'원'"></p>
	      <p class="name">[[${o.productName}]]</p>
	    </div>
	    <button class="review-btn" th:if="${o.orderStatus=='confirmed'}" onclick="location.href='#'">리뷰쓰러가기</button>
	    <a th:href="@{#}" class="cs-link">상품문의하기 ></a>
	  </div>
	  <div class="order-body">
	    <div class="order-image">(이미지)</div>
	    <div class="order-info">
	      <p class="status">구매확정</p>
	      <p class="price">가격</p>
	      <p class="name">상품이름</p>
	    </div>
	    <button class="review-btn">리뷰쓰러가기</button> <!-- //구매확정일때만 나타나기 -->
	    <a href="#" class="cs-link">상품문의하기 ></a>
	  </div>
	  <div class="order-body">
	    <div class="order-image">(이미지)</div>
	    <div class="order-info">
	      <p class="status">구매확정</p>
	      <p class="price">가격</p>
	      <p class="name">상품이름</p>
	    </div>
	    <button class="review-btn">리뷰쓰러가기</button> <!-- //구매확정일때만 나타나기 -->
	    <a href="#" class="cs-link">상품문의하기 ></a>
	  </div>
</div>
<div class= "order-detail" th:each="o:${olist}">
<details style="border-bottom: none;">
	  <summary>주문자 정보 </summary>
	  <p>주문자 / [[${o.userNo}]]</p>
	  <p>연락처 / [[${o.userPhone}]]</p>
</details>

<details style="border-bottom: none;">
	  <summary >결제 정보 </summary>
	  <p>결제 방법 / [[${o.paymentMethod}]]</p>
	  <p>총 상품금액 /[[${#numbers.formatInteger((order != null && order.payPrice != null) ? order.payPrice : 0, 3, 'COMMA')}]]원 </p>
</details>

<details style="border-bottom: none;">
	  <summary>배송 정보 </summary>
	  <p>주소 / [[${order.userAddress}]]</p>
	  <p>수령인 / [[${order.userName}]]</p>
	  <p>전화번호 [[${order.userPhone}]]</p>
</details>
</div>


</form>
</body>
</html>